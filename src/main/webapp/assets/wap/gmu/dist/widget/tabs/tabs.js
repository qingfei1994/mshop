(function(e,t,n){var r=1,i=function(){return r++},s=/^#(.+)$/;e.define("Tabs",{options:{active:0,items:null,transition:"slide"},template:{nav:'<ul class="ui-tabs-nav"><% var item; for(var i=0, length=items.length; i<length; i++) { item=items[i]; %><li<% if(i==active){ %> class="ui-state-active"<% } %>><a href="javascript:;"><%=item.title%></a></li><% } %></ul>',content:'<div class="ui-viewport ui-tabs-content"><% var item; for(var i=0, length=items.length; i<length; i++) { item=items[i]; %><div<% if(item.id){ %> id="<%=item.id%>"<% } %> class="ui-tabs-panel <%=transition%><% if(i==active){ %> ui-state-active<% } %>"><%=item.content%></div><% } %></div>'},_init:function(){var e=this,n=e._options,r,i=t.proxy(e._eventHandler,e);e.on("ready",function(){r=e.$el,r.addClass("ui-tabs"),n._nav.on("tap",i).children().highlight("ui-state-hover")}),t(window).on("ortchange",i)},_create:function(){var e=this,n=e._options;e._options.setup&&e.$el.children().length>0?e._prepareDom("setup",n):(n.setup=!1,e.$el=e.$el||t("<div></div>"),e._prepareDom("create",n))},_prepareDom:function(e,n){var r=this,o,u=r.$el,a,f,l,c;switch(e){case"setup":n._nav=r._findElement("ul").first();if(n._nav){n._content=r._findElement("div.ui-tabs-content"),n._content=(n._content&&n._content.first()||t("<div></div>").appendTo(u)).addClass("ui-viewport ui-tabs-content"),a=[],n._nav.addClass("ui-tabs-nav").children().each(function(){var e=r._findElement("a",this),o=e?e.attr("href"):t(this).attr("data-url"),u,f;u=s.test(o)?RegExp.$1:"tabs_"+i(),(f=r._findElement("#"+u)||t('<div id="'+u+'"></div>')).addClass("ui-tabs-panel"+(n.transition?" "+n.transition:"")).appendTo(n._content),a.push({id:u,href:o,title:e?e.attr("href","javascript:;").text():t(this).text(),content:f})}),n.items=a,n.active=Math.max(0,Math.min(a.length-1,n.active||t(".ui-state-active",n._nav).index()||0)),r._getPanel().add(n._nav.children().eq(n.active)).addClass("ui-state-active");break};default:a=n.items=n.items||[],f=[],l=[],n.active=Math.max(0,Math.min(a.length-1,n.active)),t.each(a,function(e,t){c="tabs_"+i(),f.push({href:t.href||"#"+c,title:t.title}),l.push({content:t.content||"",id:c}),a[e].id=c}),n._nav=t(this.tpl2html("nav",{items:f,active:n.active})).prependTo(u),n._content=t(this.tpl2html("content",{items:l,active:n.active,transition:n.transition})).appendTo(u),n.container=n.container||(u.parent().length?null:"body")}n.container&&u.appendTo(n.container),r._fitToContent(r._getPanel())},_getPanel:function(e){var r=this._options;return t("#"+r.items[e===n?r.active:e].id)},_findElement:function(e,n){var r=t(n||this.$el).find(e);return r.length?r:null},_eventHandler:function(e){var n,r=this._options;switch(e.type){case"ortchange":this.refresh();break;default:(n=t(e.target).closest("li",r._nav.get(0)))&&n.length&&(e.preventDefault(),this.switchTo(n.index()))}},_fitToContent:function(e){var t=this._options,r=t._content;return t._plus===n&&(t._plus=parseFloat(r.css("border-top-width"))+parseFloat(r.css("border-bottom-width"))),r.height(e.height()+t._plus),this},switchTo:function(n){var r=this,i=r._options,s=i.items,o,u,a,f,l;if(!i._buzy&&i.active!=(n=Math.max(0,Math.min(s.length-1,n)))){u=t.extend({},s[n]),u.div=r._getPanel(n),u.index=n,a=t.extend({},s[i.active]),a.div=r._getPanel(),a.index=i.active,o=e.Event("beforeActivate"),r.trigger(o,u,a);if(o.isDefaultPrevented())return r;i._content.children().removeClass("ui-state-active"),u.div.addClass("ui-state-active"),i._nav.children().removeClass("ui-state-active").eq(u.index).addClass("ui-state-active"),i.transition&&(i._buzy=!0,l=t.fx.animationEnd+".tabs",f=n>i.active?"":" reverse",i._content.addClass("ui-viewport-transitioning"),a.div.addClass("out"+f),u.div.addClass("in"+f).on(l,function(e){if(e.target!=e.currentTarget)return;u.div.off(l,arguments.callee),i._buzy=!1,a.div.removeClass("out reverse"),u.div.removeClass("in reverse"),i._content.removeClass("ui-viewport-transitioning"),r.trigger("animateComplete",u,a),r._fitToContent(u.div)})),i.active=n,r.trigger("activate",u,a),i.transition||r._fitToContent(u.div)}return r},refresh:function(){return this._fitToContent(this._getPanel())},destroy:function(){var e=this._options,t=this._eventHandler;return e._nav.off("tap",t).children().highlight(),e.swipe&&e._content.off("swipeLeft swipeRight",t),e.setup||this.$el.remove(),this.$super("destroy")}})})(gmu,gmu.$);
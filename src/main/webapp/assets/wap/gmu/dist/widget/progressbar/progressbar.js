(function(e,t,n){e.define("Progressbar",{options:{initValue:0,horizontal:!0,transitionDuration:300,_isShow:!0,_current:0,_percent:0},_init:function(){var e=this,n,r,i,s,o;e.on("ready",function(){n=e.$el,r=t.proxy(e._eventHandler,e),i=n.find(".ui-progressbar-button"),s=n.find(".ui-progressbar-bg"),o=n.offset(),i.on("touchstart touchmove touchend touchcancel",r),s.on("touchstart",r),t.extend(e._options,{_button:i[0],$_background:s,_filled:n.find(".ui-progressbar-filled")[0],_width:o.width,_height:o.height}),e._options.horizontal&&o.width&&n.width(o.width),e._options.initValue>0&&e.value(e._options.initValue)}),e.on("destroy",function(){e._options.setup||e.$el.remove()})},_create:function(){var e=this,n=e._options.horizontal?"h":"v";e.$el||(e.$el=t("<div></div>")),e.$el.addClass("ui-progressbar-"+n).appendTo(e._options.container||(e.$el.parent().length?"":document.body)).html('<div class="ui-progressbar-bg"><div class="ui-progressbar-filled"></div><div class="ui-progressbar-button"><div><b></b></div></div></div>')},_eventHandler:function(e){var n=this;switch(e.type){case"touchmove":n._touchMove(e);break;case"touchstart":t(e.target).hasClass("ui-progressbar-bg")?n._click(e):n._touchStart(e);break;case"touchcancel":case"touchend":n._touchEnd();break;case"tap":n._click(e)}},_touchStart:function(e){var n=this,r=n._options;t.extend(n._options,{pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,S:!1,T:!1,X:0,Y:0}),r._button.style.webkitTransitionDuration="0ms",r._filled.style.webkitTransitionDuration="0ms",t(r._button).addClass("ui-progressbar-button-pressed"),n.trigger("dragStart")},_touchMove:function(e){var t=this,n=t._options,r=e.touches[0],i=r.pageX-n.pageX,s=r.pageY-n.pageY,o;if(!n.T){var u=Math.abs(i)<Math.abs(r.pageY-n.pageY);n.T=!0,n.S=u}n.horizontal?n.S||(e.stopPropagation(),e.preventDefault(),o=(i+n._current)/n._width*100,o<=100&&o>=0&&(n._percent=o,n.X=i,n._button.style.webkitTransform="translate3d("+(n.X+n._current)+"px,0,0)",n._filled.style.width=o+"%",t.trigger("valueChange")),t.trigger("dragMove")):n.S&&(e.stopPropagation(),e.preventDefault(),o=-(n._current+s)/n._height*100,o<=100&&o>=0&&(n._percent=o,n.Y=s,n._button.style.webkitTransform="translate3d(0,"+(s+n._current)+"px,0)",n._filled.style.cssText+="height:"+o+"%;top:"+(n._height+s+n._current)+"px",t.trigger("valueChange")),t.trigger("dragMove"))},_touchEnd:function(){var e=this,n=e._options;n._current+=n.horizontal?n.X:n.Y,t(n._button).removeClass("ui-progressbar-button-pressed"),e.trigger("dragEnd")},_click:function(e){var t=this,n=t._options,r=n.$_background.offset(),i=e.touches[0];n.horizontal?t.value((i.pageX-r.left)/n._width*100):t.value((n._height-i.pageY+r.top)/n._height*100)},value:function(e){var t=this,r=t._options,i,s;return e===n?r._percent:(e=parseFloat(e),isNaN(e)?t:(e=e>100?100:e<0?0:e,r._percent=e,s=";-webkit-transition-duration:"+r.transitionDuration+"ms",r.horizontal?(i=r._current=r._width*e/100,r._button.style.cssText+="-webkit-transform:translate3d("+i+"px,0,0)"+s,r._filled.style.cssText+="width:"+e+"%"+s):(i=r._current=r._height*e/-100,r._button.style.cssText+="-webkit-transform:translate3d(0,"+i+"px,0)"+s,r._filled.style.cssText+="height:"+e+"%;top:"+(r._height+i)+"px"+s),t.trigger("valueChange"),t))},show:function(){var e=this;return e._options._isShow||(e.$el.css("display","block"),e._options._isShow=!0),e},hide:function(){var e=this;return e._options._isShow&&(e.$el.css("display","none"),e._options._isShow=!1),e}})})(gmu,gmu.$);
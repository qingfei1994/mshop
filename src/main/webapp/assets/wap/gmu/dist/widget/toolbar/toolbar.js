(function(e,t){e.define("Toolbar",{options:{container:document.body,title:"标题",leftBtns:[],rightBtns:[],fixed:!1},_init:function(){var e=this,n=e._options,r;n.container||(n.container=document.body),e.on("ready",function(){r=e.$el;if(n.fixed){var i=t('<div class="ui-toolbar-placeholder"></div>').height(r.offset().height).insertBefore(r).append(r).append(r.clone().css({"z-index":1,position:"absolute",top:0})),s=r.offset().top,o=function(){document.body.scrollTop>s?r.css({position:"fixed",top:0}):r.css("position","absolute")},u;t(window).on("touchmove touchend touchcancel scroll scrollStop",o),t(document).on("touchend touchcancel",u=function(){setTimeout(function(){o()},200)}),e.on("destroy",function(){t(window).off("touchmove touchend touchcancel scroll scrollStop",o),t(document).off("touchend touchcancel",u),r.insertBefore(i),i.remove(),e._removeDom()}),o()}}),e.on("destroy",function(){e._removeDom()})},_create:function(){var e=this,n=e._options,r=e.getEl(),i=t(n.container),s=[],o=e.btnGroups={left:[],right:[]},u=o.left;n.setup||(r&&r.length>0?r.appendTo(i):r=e.$el=t("<div>").appendTo(i)),s=r.children(),$toolbarWrap=r.find(".ui-toolbar-wrap"),$toolbarWrap.length===0?$toolbarWrap=t('<div class="ui-toolbar-wrap"></div>').appendTo(r):s=$toolbarWrap.children(),s.forEach(function(t){$toolbarWrap.append(t),/^[hH]/.test(t.tagName)?(u=o.right,e.title=t):u.push(t)});var a=$toolbarWrap.find(".ui-toolbar-left"),f=$toolbarWrap.find(".ui-toolbar-right");a.length===0&&(a=s.length?t('<div class="ui-toolbar-left">').insertBefore(s[0]):t('<div class="ui-toolbar-left">').appendTo($toolbarWrap),o.left.forEach(function(e){t(e).addClass("ui-toolbar-button"),a.append(e)}),f=t('<div class="ui-toolbar-right">').appendTo($toolbarWrap),o.right.forEach(function(e){t(e).addClass("ui-toolbar-button"),f.append(e)})),r.addClass("ui-toolbar"),t(e.title).length?t(e.title).addClass("ui-toolbar-title"):t('<h1 class="ui-toolbar-title">'+n.title+"</h1>").insertAfter(a),e.btnContainer={left:a,right:f},e.addBtns("left",n.leftBtns),e.addBtns("right",n.rightBtns)},_addBtn:function(e,n){var r=this;t(n).appendTo(e).addClass("ui-toolbar-button")},addBtns:function(t,n){var r=this,i=r.btnContainer[t],s=Object.prototype.toString;return s.call(t)!="[object String]"&&(n=t,i=r.btnContainer.right),n.forEach(function(t,n){t instanceof e.Base&&(t=t.getEl()),r._addBtn(i,t)}),r},show:function(){var e=this;return e.$el.show(),e.trigger("show"),e.isShowing=!0,e},hide:function(){var e=this;return e.$el.hide(),e.trigger("hide"),e.isShowing=!1,e},toggle:function(){var e=this;return e.isShowing===!1?e.show():e.hide(),e},_removeDom:function(){var e=this,t=e.$el;e._options.setup===!1?t.remove():t.css("position","static").css("top","auto")}})})(gmu,gmu.$);
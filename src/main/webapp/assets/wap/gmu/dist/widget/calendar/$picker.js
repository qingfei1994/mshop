(function(e,t){function n(e,r){var i=t('<span class="ui-holder"></span>'),s=t('<div class="ui-slideup-wrap">   <div class="ui-slideup">       <div class="header">           <span class="ok-btn">确认</span>           <span class="no-btn">取消</span>       </div>       <div class="frame"></div>   </div></div>'),o=t(".ui-slideup",s),u=t(".frame",o),a={refresh:function(e){s.css({top:window.pageYOffset+"px",height:window.innerHeight+"px"}),o.animate({translateY:"-"+o.height()+"px",translateZ:"0"},400,"ease-out",function(){e&&e.call(a)})},close:function(r){var u=n.count=n.count-1;return s.off("click.slideup"+f),o.animate({translateY:"0",translateZ:"0"},200,"ease-out",function(){r&&r(),i.replaceWith(e),s.remove(),u===0&&t(document).off("touchmove.slideup")}).find(".ok-btn, .no-btn").highlight(),a}},f=n.id=(n.id>>>0)+1,l;return u.append(e.replaceWith(i)),l=n.count=(n.count>>>0)+1,l===1&&t(document).on("touchmove.slideup",function(e){e.preventDefault()}),s.on("click.slideup"+f,".ok-btn, .no-btn",function(){r.call(a,t(this).is(".ok-btn"))!==!1&&a.close()}).appendTo(document.body).find(".ok-btn, .no-btn").highlight("ui-state-hover"),a.refresh(),a}e.Calendar.register("picker",{_create:function(){var e=this.$el;if(!e)throw new Error("请指定日期选择器的赋值对象")},_init:function(){var e=this.$el,n=this._options;this._container=t("<div></div>"),n.date||(n.date=e[e.is("select, input")?"val":"text"]()),t(window).on("ortchange",t.proxy(this._eventHandler,this)),this.on("commit",function(n,r){var i=t.calendar.formatDate(r);e[e.is("select, input")?"val":"text"](i)}),this.on("destroy",function(){t(window).off("ortchange",this._eventHandler),this._frame&&this._frame.close()})},_eventHandler:function(e){e.type==="ortchange"?this._frame&&this._frame.refresh():this.origin(e)},show:function(){var e=this,r;return this._visible?this:(r=this._container,this._visible=!0,this.refresh(),this._frame=n(r,function(n){var r;return n?(r=e._option("selectedDate"),e.trigger("commit",r,t.calendar.formatDate(r),e),e._option("date",r)):e._option("selectedDate",e._option("date")),e.hide(),!1}),this.trigger("show",this))},hide:function(){var t=this,n;return this._visible?(n=new e.Event("beforehide"),this.trigger(n,this),n.isDefaultPrevented()?this:(this._visible=!1,this._frame.close(function(){t.trigger&&t.trigger("hide")}),this._frame=null,this)):this}})})(gmu,gmu.$);
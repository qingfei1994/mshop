(function(e,t,n){var r=t.fx.cssPrefix,i=t.fx.transitionEnd;e.define("Panel",{options:{contentWrap:"",scrollMode:"follow",display:"push",position:"right",dismissible:!0,swipeClose:!0},_init:function(){var e=this,n=e._options;e.on("ready",function(){e.displayFn=e._setDisplay(),e.$contentWrap.addClass("ui-panel-animate"),e.$el.on(i,t.proxy(e._eventHandler,e)).hide(),n.dismissible&&e.$panelMask.hide().on("click",t.proxy(e._eventHandler,e)),n.scrollMode!=="follow"&&t(window).on("scrollStop",t.proxy(e._eventHandler,e)),t(window).on("ortchange",t.proxy(e._eventHandler,e))})},_create:function(){if(!this._options.setup)throw new Error("panel组件不支持create模式，请使用setup模式");var e=this,n=e._options,r=e.$el.addClass("ui-panel ui-panel-"+n.position);e.panelWidth=r.width()||0,e.$contentWrap=t(n.contentWrap||r.next()),n.dismissible&&(e.$panelMask=t('<div class="ui-panel-dismiss"></div>').width(document.body.clientWidth-r.width()).appendTo("body")||null)},_setDisplay:function(){var e=this,n=e.$el,i=e.$contentWrap,s=r+"transform",o=e._transDisplayToPos(),u={},a,f;return t.each(["push","overlay","reveal"],function(t,r){u[r]=function(t,u,l){return a=o[r].panel,f=o[r].cont,n.css(s,"translate3d("+e._transDirectionToPos(u,a[t])+"px,0,0)"),l||(i.css(s,"translate3d("+e._transDirectionToPos(u,f[t])+"px,0,0)"),e.maskTimer=setTimeout(function(){e.$panelMask&&e.$panelMask.css(u,n.width()).toggle(t)},400)),e}}),u},_initPanelPos:function(e,t){return this.displayFn[e](0,t,!0),this.$el.get(0).clientLeft,this},_transDirectionToPos:function(e,t){return e==="left"?t:-t},_transDisplayToPos:function(){var e=this,t=e.panelWidth;return{push:{panel:[-t,0],cont:[0,t]},overlay:{panel:[-t,0],cont:[0,0]},reveal:{panel:[0,0],cont:[0,t]}}},_setShow:function(e,n,r){var i=this,s=i._options,o=e?"open":"close",u=t.Event("before"+o),a=e!==i.state(),f=e?"on":"off",l=e?t.proxy(i._eventHandler,i):i._eventHandler,c=n||s.display,h=r||s.position;return i.trigger(u,[n,r]),u.isDefaultPrevented()?i:(a&&(i._dealState(e,c,h),i.displayFn[c](i.isOpen=Number(e),h),s.swipeClose&&i.$el[f](t.camelCase("swipe-"+h),l),s.display=c,s.position=h),i)},_dealState:function(e,n,r){var s=this,o=s._options,u=s.$el,a=s.$contentWrap,f="ui-panel-"+n+" ui-panel-"+r,l="ui-panel-"+o.display+" ui-panel-"+o.position+" ui-panel-animate";return e&&(u.removeClass(l).addClass(f).show(),o.scrollMode==="fix"&&u.css("top",t(window).scrollTop()),s._initPanelPos(n,r),n==="reveal"?a.addClass("ui-panel-contentWrap").on(i,t.proxy(s._eventHandler,s)):(a.removeClass("ui-panel-contentWrap").off(i,t.proxy(s._eventHandler,s)),u.addClass("ui-panel-animate")),s.$panelMask&&s.$panelMask.css({left:"auto",right:"auto",height:document.body.clientHeight})),s},_eventHandler:function(e){var n=this,r=n._options,s=r.scrollMode,o=n.state()?"open":"close";switch(e.type){case"click":case"swipeLeft":case"swipeRight":n.close();break;case"scrollStop":s==="fix"?n.$el.css("top",t(window).scrollTop()):n.close();break;case i:n.trigger(o,[r.display,r.position]);break;case"ortchange":n.$panelMask&&n.$panelMask.css("height",document.body.clientHeight),s==="fix"&&n.$el.css("top",t(window).scrollTop())}},open:function(e,t){return this._setShow(!0,e,t)},close:function(){return this._setShow(!1)},toggle:function(e,t){return this[this.isOpen?"close":"open"](e,t)},state:function(){return!!this.isOpen},destroy:function(){return this.$panelMask&&this.$panelMask.off().remove(),this.maskTimer&&clearTimeout(this.maskTimer),this.$contentWrap.removeClass("ui-panel-animate"),t(window).off("scrollStop",this._eventHandler),t(window).off("ortchange",this._eventHandler),this.$super("destroy")}})})(gmu,gmu.$);
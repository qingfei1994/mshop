(function(e){e.extend(gmu.Suggestion.options,{isHistory:!0,usePlus:!1,listCount:5,renderlist:null}),gmu.Suggestion.option("renderlist",function(){return e.type(this._options.renderlist)!=="function"},function(){var t=this,n=e("<div></div>"),r=function(e){return n.text(e).html()},i=function(n,i){var s=t._options,o=[],u="",a,f,l;if(!i||!i.length)return t.hide(),o;i=i.slice(0,s.listCount),n=r(n||"");for(l=0,f=i.length;l<f;l++)u=r(a=i[l]),n&&(u=e.trim(a).replace(n,"<span>"+n+"</span>")),s.usePlus&&(u+='<div class="ui-suggestion-plus" data-item="'+a+'"></div>'),o.push("<li>"+u+"</li>");return o};t.on("ready",function(){var t=this,n=t.eventNs,r=e(t._options.form||t.getEl().closest("form"));r.size()&&(t.$form=r.on("submit"+n,function(e){var n=gmu.Event("submit");t._options.isHistory&&t._localStorage(t.value()),t.trigger(n),n.isDefaultPrevented()&&e.preventDefault()})),t.$content.on("touchstart"+n,function(e){e.preventDefault()}),t.$content.on("tap"+n,function(n){var r=t.getEl(),i=e(n.target);i.hasClass("ui-suggestion-plus")?r.val(i.attr("data-item")):e.contains(t.$content.get(0),i.get(0))&&setTimeout(function(){r.val(i.text()),t.trigger("select",i).hide().$form.submit()},400)}).highlight("ui-suggestion-highlight"),t.on("destroy",function(){r.size()&&r.off(n),t.$content.off()})}),t.on("renderlist",function(e,t,n,r){var s=i(n,t);return r(s.length?"<ul>"+s.join(" ")+"</ul>":"")})})})(gmu.$);